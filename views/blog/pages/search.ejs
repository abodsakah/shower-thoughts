<%- include("../components/header"), {title:title} %>


<!--Main layout-->
<main class="my-5">
  <div class="container">
    <!--Section: Content-->
    <section class="text-center">
      <h4 class="mb-5"><strong>Searching for "<%= term %>"</strong></h4>

      <div class="row">
      <% if(posts.length > 0){for(post of posts){ %> 
        <div class="col-lg-4 col-md-12 mb-4">
          <div class="card">
            <% if(post.image){ %> 
              <div class="bg-image hover-overlay ripple" data-mdb-ripple-color="light">
                <img src="/uploads/<%= post.image %>" class="img-fluid" />
                <a href="/post?id=<%= post.id %>">
                  <div class="mask" style="background-color: rgba(251, 251, 251, 0.15);"></div>
                </a>
              </div>
              <div class="card-body">
                <h5 class="card-title"><%- post.title %></h5>
                <p class="card-text">
                  <small>Writen by: <strong><%= post.author %></strong></small>
                </p>
                <a href="/post?id=<%= post.id %>" class="btn btn-primary">Read</a>
              </div>
            <% }else{ %>
              <div class="card-body">
                <h2 class="card-title"><%- post.title %></h2>
                <p class="card-text">
                  <small>Writen by: <strong><%= post.author %></strong></small>
                </p>
                <a href="/post?id=<%= post.id %>" class="btn btn-primary">Read</a>
              </div>
            <% } %> 
            
          </div>
        </div>
        <% }}else{ %>
            <h3>Sorry, looks like there is nothing for now!</h3>
        <% } %>
      </div>
      
    </section>
    <% if(amount_pages > 1){ %> 
    <ul class="pagination">
        <% if(page > 1){ %> 
        <li class="selectable"><a href="/all-posts?page=<%=parseInt(page)-1%>"><i class="fas fa-angle-double-left"></i></a></li>
        <% } %>
      <% for(let i = 1; i <= amount_pages; i++){if(page != i){ %>
          <li class="selectable"><a href="/all-posts?page=<%=i%>"><%=i%></a></li>
        <% }else{ %>
            <li class="active"><%=i%></li>
        <% }} %>
      <% if(page < amount_pages){ %> 
      <li class="selectable"><a href="/all-posts?page=<%=parseInt(page)+1%>"><i class="fas fa-angle-double-right"></i></a></li>
      <% } %>
    </ul>
    <% } %> 

    <!--Section: Content-->
</main>
<!--Main layout-->


<% include("../components/footer") %> 